 <!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MAYLO â€¢ Home Console</title>
<style>
  :root{
    --bg:#0a0f1a; --panel:#0d1422cc; --stroke:#0ef; --accent:#25ffd8;
    --text:#e6f6ff; --muted:#8fbad1; --danger:#ff4f64; --ok:#35f0a3;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:radial-gradient(1200px 800px at 20% -10%,#11223a 0%,#0a0f1a 50%,#060a12 100%);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Inter,Arial;overflow-x:hidden}
  .grid-bg{position:fixed;inset:0;pointer-events:none;opacity:.25;background:
    radial-gradient(800px 400px at 80% 110%, rgba(0,255,255,.08), transparent 60%),
    repeating-linear-gradient(90deg, rgba(0,255,255,.04) 0 1px, transparent 1px 60px),
    repeating-linear-gradient(0deg,  rgba(0,255,255,.04) 0 1px, transparent 1px 60px);
    filter:drop-shadow(0 0 6px rgba(0,255,255,.35))}
  .wrap{max-width:1200px;margin:0 auto;padding:24px}
  .hdr{display:flex;align-items:center;gap:14px;margin-bottom:18px}
  .logo{width:42px;height:42px;border-radius:50%;background:conic-gradient(from 0deg,var(--stroke),transparent 30%,var(--accent));box-shadow:0 0 20px var(--stroke), inset 0 0 10px #000;position:relative}
  .logo::after{content:"";position:absolute;inset:7px;border-radius:50%;border:2px solid var(--stroke);box-shadow:0 0 18px var(--stroke)}
  .title{font-weight:800;letter-spacing:.12em}
  .sub{color:var(--muted);font-size:13px}
  .grid{display:grid;gap:16px;grid-template-columns: 1.2fr 1fr .9fr}
  @media (max-width:1100px){ .grid{grid-template-columns:1fr 1fr} }
  @media (max-width:780px){  .grid{grid-template-columns:1fr} }
  .card{background:var(--panel);border:1px solid rgba(0,255,255,.18);border-radius:18px;padding:16px;backdrop-filter: blur(10px) saturate(120%);box-shadow:0 0 0 1px rgba(0,255,255,.08), 0 15px 40px #0008}
  .card h3{margin:0 0 12px;font-size:15px;font-weight:800;letter-spacing:.14em;color:#bff}
  .muted{color:var(--muted)}
  .radar{--size:360px;width:var(--size);aspect-ratio:1/1;margin:auto;border-radius:50%;position:relative;overflow:hidden;background:
    radial-gradient(circle at center, transparent 40%, rgba(0,255,255,.06) 41% 100%),
    conic-gradient(from 0deg, rgba(0,255,255,.15), transparent 40%, rgba(0,255,255,.15) 60%, transparent 100%);
    border:1px solid rgba(0,255,255,.35);box-shadow:0 0 25px rgba(0,255,255,.35), inset 0 0 35px rgba(0,255,255,.25)}
  .sweep{position:absolute;inset:0;transform-origin:50% 50%;background:conic-gradient(from 0deg, rgba(0,255,255,.25), transparent 35%);animation:sweep 3.5s linear infinite;mix-blend-mode:screen;filter:blur(2px)}
  @keyframes sweep{to{transform:rotate(360deg)}}
  .ticks::before,.ticks::after{content:"";position:absolute;inset:0;border-radius:50%;border:1px dashed rgba(0,255,255,.25);box-shadow:inset 0 0 10px rgba(0,255,255,.3)}
  .ticks::after{transform:scale(.66)}
  .clock{display:flex;align-items:baseline;gap:10px}
  .time{font-size:56px;font-weight:900;text-shadow:0 0 20px rgba(0,255,255,.3)}
  .date{color:#bde;letter-spacing:.04em}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .btn{position:relative;isolation:isolate;background:linear-gradient(180deg,#072934,#03141b);border:1px solid rgba(0,255,255,.35);color:var(--text);padding:12px 14px;border-radius:12px;font-weight:700;box-shadow:0 6px 18px #0009, inset 0 0 12px rgba(0,255,255,.12);cursor:pointer}
  .btn::after{content:"";position:absolute;inset:-2px;border-radius:14px;border:1px solid rgba(0,255,255,.25);filter:blur(6px);z-index:-1}
  .btn.small{padding:9px 12px;font-weight:600}
  .chip{border:1px solid rgba(0,255,255,.25);padding:4px 8px;border-radius:20px;color:#bff;font-size:12px}
  .kv{display:grid;grid-template-columns:120px 1fr;gap:6px 12px;font-size:14px}
  .ok{color:var(--ok)} .danger{color:var(--danger)} .mono{font-family:ui-monospace,Menlo,Consolas,monospace}
  .log{background:#06101b;border:1px solid rgba(0,255,255,.25);border-radius:12px;padding:10px;height:140px;overflow:auto;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:13px}
  .gauge{display:flex;gap:10px;align-items:center}
  .bar{height:10px;flex:1;background:#0b2230;border:1px solid rgba(0,255,255,.25);border-radius:20px;overflow:hidden}
  .fill{height:100%;width:0;background:linear-gradient(90deg,var(--stroke),var(--accent));box-shadow:0 0 14px var(--stroke)}
  .range{appearance:none;width:100%}
  .range::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent);box-shadow:0 0 12px var(--accent)}
  .range::-webkit-slider-runnable-track{height:12px;border-radius:20px;background:#0b2230;border:1px solid rgba(0,255,255,.25)}

  /* Modal */
  .modal{position:fixed;inset:0;background:#000a;display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
  .modal .box{background:var(--panel);border:1px solid rgba(0,255,255,.35);border-radius:18px;max-width:520px;width:100%;padding:18px;box-shadow:0 20px 60px #000d}
  .modal h4{margin:0 0 10px;letter-spacing:.2em;color:#bff}
  .field{display:flex;gap:10px;align-items:center;margin:10px 0}
  .inp{flex:1;background:#06121e;border:1px solid rgba(0,255,255,.25);border-radius:10px;color:var(--text);padding:10px 12px;font-size:16px}
  .row-right{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
  .hint{font-size:12px;color:var(--muted)}
  video{width:100%;border-radius:12px;border:1px solid rgba(0,255,255,.25);background:#000}
  .admin-panel{display:none;margin-top:12px}
  .tag{font-size:12px;border:1px solid rgba(0,255,255,.35);border-radius:8px;padding:2px 8px;color:#bff}
</style>
</head>
<body>
<div class="grid-bg"></div>

<div class="wrap">
  <div class="hdr">
    <div class="logo"></div>
    <div>
      <div class="title">M A Y L O  â€¢  H O M E  C O N S O L E</div>
      <div class="sub">Local node online Â· Secured over HTTPS Â· Mic enabled</div>
    </div>
  </div>

  <div class="grid">
    <!-- LEFT -->
    <div class="card">
      <h3>CORE VISOR</h3>
      <div class="radar"><div class="sweep"></div><div class="ticks"></div></div>
      <div style="height:14px"></div>
      <div class="clock"><div id="time" class="time">--:--</div><div id="date" class="date">â€”</div></div>
      <div class="row" style="margin-top:10px">
        <span class="chip">Uptime: <span id="uptime">â€”</span></span>
        <span class="chip">LAN: <span id="lan">â€”</span></span>
        <span class="chip">Backend: <span id="backendStat">OFF</span></span>
      </div>
    </div>

    <!-- MIDDLE -->
    <div class="card">
      <h3>COMMANDS</h3>
      <div class="row">
        <button class="btn" onclick="toggleLight('light.salon')">Salon IÅŸÄ±k</button>
        <button class="btn" onclick="toggleLight('light.mutfak')">Mutfak IÅŸÄ±k</button>
        <button class="btn" onclick="setClimate('climate.ev',24)">Klima 24Â°</button>
        <button class="btn" onclick="setClimate('climate.ev',22)">Klima 22Â°</button>
      </div>
      <div style="height:12px"></div>
      <div class="row">
        <button class="btn small" onclick="runScene('scene.film')">ðŸŽ¬ Film Modu</button>
        <button class="btn small" onclick="runScene('scene.gece')">ðŸŒ™ Gece Modu</button>
        <button class="btn small" onclick="runScene('scene.evden_cik')">ðŸšª Evden Ã‡Ä±k</button>
        <span id="ctrlStatus" class="muted"></span>
      </div>

      <div style="height:16px"></div>
      <h3>POWER â€¢ NETWORK</h3>
      <div class="gauge">
        <div class="muted" style="width:80px">CPU</div>
        <div class="bar"><div id="cpuFill" class="fill"></div></div>
        <div class="mono" id="cpuPct">0%</div>
      </div>
      <div class="gauge" style="margin-top:8px">
        <div class="muted" style="width:80px">RAM</div>
        <div class="bar"><div id="ramFill" class="fill"></div></div>
        <div class="mono" id="ramPct">0%</div>
      </div>

      <!-- STORAGE + BRIGHTNESS -->
      <div class="gauge" style="margin-top:8px">
        <div class="muted" style="width:80px">STORAGE</div>
        <div class="bar"><div id="stoFill" class="fill"></div></div>
        <div class="mono" id="stoPct">0%</div>
      </div>
      <div style="margin-top:12px">
        <div class="muted" style="margin-bottom:6px">BRIGHTNESS</div>
        <input id="bright" type="range" min="10" max="100" value="70" class="range" oninput="onBrightInput(this.value)" onchange="applyBrightness(this.value)"/>
        <div class="row"><span id="brightLbl" class="mono">70%</span></div>
      </div>

      <!-- YÃ–NETÄ°CÄ° BUTONU -->
      <div style="margin-top:16px" class="row">
        <button class="btn" onclick="openAdmin()">ðŸ‘¤ YÃ¶netici</button>
        <span class="hint">YÃ¶netici iÅŸlemleri iÃ§in ÅŸifre veya yÃ¼z tanÄ±ma (DEMO)</span>
      </div>

      <!-- ADMIN PANEL (giriÅŸ sonrasÄ± gÃ¶rÃ¼nÃ¼r) -->
      <div id="adminPanel" class="admin-panel">
        <div class="row" style="margin-top:10px">
          <span class="tag">ADMIN MODE</span>
          <button class="btn small" onclick="location.reload()">Paneli Yenile</button>
          <button class="btn small" onclick="kioskToggle()">Kiosk Kilidi</button>
          <button class="btn small" onclick="probeBackend()">Backendâ€™i Dene</button>
        </div>
        <div class="muted" id="adminMsg" style="margin-top:8px"></div>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="card">
      <h3>VOICE LINK</h3>
      <div class="row">
        <button id="recBtn" class="btn" onclick="record()">ðŸŽ¤ Bas-KonuÅŸ</button>
        <button class="btn" onclick="speak('Komut alÄ±ndÄ±. Ä°ÅŸlem uygulanÄ±yor.')">ðŸ”Š TTS Test</button>
      </div>
      <div class="muted" id="recStatus" style="margin:8px 2px 0">HazÄ±r</div>
      <div class="log" id="sttOut" style="margin-top:10px">Transcript burada gÃ¶rÃ¼necekâ€¦</div>

      <div style="height:12px"></div>
      <h3>WEATHER</h3>
      <div class="kv">
        <div class="muted">Konum</div><div id="wCity">â€”</div>
        <div class="muted">SÄ±caklÄ±k</div><div id="wTemp">â€”</div>
        <div class="muted">Durum</div><div id="wDesc">â€”</div>
      </div>

      <div style="height:12px"></div>
      <h3>EVENT LOG</h3>
      <div class="log" id="logBox">System online.</div>
    </div>
  </div>
</div>

<!-- ADMIN MODAL -->
<div id="adminModal" class="modal" aria-hidden="true">
  <div class="box">
    <h4>YÃ–NETÄ°CÄ° DOÄžRULAMA</h4>

    <!-- PIN GÃ–RÃœNÃœMÃœ -->
    <div class="field" style="justify-content:center">
      <input id="pinDisplay" type="password" class="inp" style="text-align:center;font-size:22px;letter-spacing:6px" disabled>
    </div>

    <!-- RAKAM TUÅž TAKIMI -->
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:12px 0">
      <button class="btn" onclick="pressNum('1')">1</button>
      <button class="btn" onclick="pressNum('2')">2</button>
      <button class="btn" onclick="pressNum('3')">3</button>
      <button class="btn" onclick="pressNum('4')">4</button>
      <button class="btn" onclick="pressNum('5')">5</button>
      <button class="btn" onclick="pressNum('6')">6</button>
      <button class="btn" onclick="pressNum('7')">7</button>
      <button class="btn" onclick="pressNum('8')">8</button>
      <button class="btn" onclick="pressNum('9')">9</button>
      <button class="btn" onclick="clearPin()">âŒ«</button>
      <button class="btn" onclick="pressNum('0')">0</button>
      <button class="btn" onclick="checkPin()">OK</button>
    </div>

    <div class="row">
      <button class="btn small" onclick="faceDemo()">ðŸ§¿ YÃ¼z ile dene (DEMO)</button>
      <button class="btn small" onclick="closeAdmin()">Kapat</button>
    </div>
    <div id="adminError" class="danger" style="margin-top:8px"></div>
  </div>
</div>

<script>
const sleep=(ms)=>new Promise(r=>setTimeout(r,ms));
function log(msg){const t=new Date().toLocaleTimeString('tr-TR',{hour:'2-digit',minute:'2-digit',second:'2-digit'});logBox.textContent+=`\n[${t}] ${msg}`;logBox.scrollTop=logBox.scrollHeight}

/* Clock */
(function tick(){const d=new Date();const p=n=>String(n).padStart(2,'0');time.textContent=`${p(d.getHours())}:${p(d.getMinutes())}`;date.textContent=d.toLocaleDateString('tr-TR',{weekday:'long', day:'2-digit', month:'long'});uptime.textContent=(performance.now()/1000/60).toFixed(0)+' dk';requestAnimationFrame(tick)})();
lan.textContent=location.hostname||'localhost';

/* Fake gauges (backend baÄŸlayÄ±nca kaldÄ±r) */
setInterval(()=>{const cpu=22+Math.round(Math.random()*35),ram=30+Math.round(Math.random()*25),sto=40+Math.round(Math.random()*40);
  cpuFill.style.width=cpu+'%';cpuPct.textContent=cpu+'%';
  ramFill.style.width=ram+'%';ramPct.textContent=ram+'%';
  stoFill.style.width=sto+'%';stoPct.textContent=sto+'%';
},1500);

/* BACKEND URL */
const API_BASE='https://YOUR-BACKEND-URL'; // TODO

/* Commands */
async function toggleLight(entity_id){ctrlStatus.textContent='IÅŸÄ±k komutuâ€¦';try{/*await fetch(`${API_BASE}/api/light/toggle`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({entity_id})})*/await sleep(600);ctrlStatus.textContent='OK';log('Light toggled: '+entity_id);speakSoft('IÅŸÄ±k komutu uygulandÄ±.')}catch(e){ctrlStatus.textContent='Hata';log('ERR light: '+e.message)}}
async function setClimate(entity_id,temperature){ctrlStatus.textContent='Klimaâ€¦';try{/*await fetch(`${API_BASE}/api/climate/set`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({entity_id,temperature})})*/await sleep(700);ctrlStatus.textContent='OK';log(`Climate set â†’ ${temperature}Â°`);speakSoft(`Klima ${temperature} dereceye ayarlandÄ±.`)}catch(e){ctrlStatus.textContent='Hata';log('ERR climate: '+e.message)}}
async function runScene(entity_id){ctrlStatus.textContent='Sahneâ€¦';try{/*await fetch(`${API_BASE}/api/scene/apply`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({entity_id})})*/await sleep(700);ctrlStatus.textContent='OK';log('Scene applied: '+entity_id)}catch(e){ctrlStatus.textContent='Hata';log('ERR scene: '+e.message)}}

/* Brightness */
function onBrightInput(v){brightLbl.textContent=v+'%'}
async function applyBrightness(v){log('Brightness â†’ '+v+'%');try{/*await fetch(`${API_BASE}/api/brightness/set`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({value:Number(v)})})*/await sleep(400);speakSoft('ParlaklÄ±k uygulandÄ±.')}catch(e){log('ERR brightness: '+e.message)}}

/* TTS */
function speak(t){try{const u=new SpeechSynthesisUtterance(t);u.lang='tr-TR';speechSynthesis.speak(u)}catch(e){log('TTS yok: '+e.message)}}
function speakSoft(t){if(!speechSynthesis.speaking) speak(t)}

/* MIC / STT (demo) */
let media,rec,chunks=[];
async function record(){try{recStatus.textContent='Mikrofon aÃ§Ä±lÄ±yorâ€¦';media=await navigator.mediaDevices.getUserMedia({audio:true});chunks=[];rec=new MediaRecorder(media);
  rec.ondataavailable=e=>chunks.push(e.data);
  rec.onstop=async ()=>{const blob=new Blob(chunks,{type:'audio/webm'});recStatus.textContent='YÃ¼kleniyorâ€¦';try{
    // const fd=new FormData();fd.append('audio',blob,'rec.webm');const r=await fetch(`${API_BASE}/stt`,{method:'POST',body:fd});const {text}=await r.json();
    await sleep(900);const text='Salon Ä±ÅŸÄ±ÄŸÄ±nÄ± aÃ§'; // demo
    sttOut.textContent=text;log('STT: '+text);handleIntent(text);recStatus.textContent='HazÄ±r';
  }catch(e){recStatus.textContent='STT hata';log('ERR stt: '+e.message)}finally{media.getTracks().forEach(t=>t.stop())}};
  rec.start();recStatus.textContent='KayÄ±t baÅŸladÄ±â€¦ Tekrar dokunarak bitir.';recBtn.onclick=stopRec;
}catch(e){recStatus.textContent='Mic hata';log('ERR mic: '+e.message)}}
function stopRec(){rec?.stop();recBtn.onclick=record}
function handleIntent(t){t=t.toLowerCase();if(t.includes('Ä±ÅŸÄ±k'))return toggleLight('light.salon');if(t.includes('klima')&&t.match(/\d{2}/)){const x=Number(t.match(/\d{2}/)[0]);return setClimate('climate.ev',x)}if(t.includes('film'))return runScene('scene.film');speakSoft('Tam anlayamadÄ±m, tekrar eder misin?')}

/* WEATHER demo */
if(navigator.geolocation){navigator.geolocation.getCurrentPosition(async p=>{const {latitude:lat,longitude:lon}=p.coords;wCity.textContent=lat.toFixed(3)+', '+lon.toFixed(3);wTemp.textContent=(22+Math.round(Math.random()*6))+'Â°C';wDesc.textContent='ParÃ§alÄ± bulutlu'},()=>{wCity.textContent='Ä°zin verilmedi'})}else{wCity.textContent='â€”'}

/* ===== ADMIN AUTH ===== */
const MODAL = document.getElementById('adminModal');
function openAdmin(){adminError.textContent='';adminPass.value='';MODAL.style.display='flex';MODAL.setAttribute('aria-hidden','false')}
function closeAdmin(){stopCam();MODAL.style.display='none';MODAL.setAttribute('aria-hidden','true')}
function checkPass(){
  if(adminPass.value==='1673'){grantAdmin();closeAdmin();return}
  adminError.textContent='HatalÄ± ÅŸifre';
}
let camStream=null, faceTimer=null;
async function faceDemo(){
  adminError.textContent=''; faceArea.style.display='block';
  try{
    camStream = await navigator.mediaDevices.getUserMedia({video:true});
    cam.srcObject = camStream; cam.play();
    faceTimer = setTimeout(()=>{ grantAdmin(); closeAdmin(); }, 2500); // DEMO: 2.5 sn sonra baÅŸarÄ±lÄ± say
  }catch(e){ adminError.textContent='Kamera aÃ§Ä±lamadÄ±: '+e.message }
}
function stopCam(){ if(faceTimer) clearTimeout(faceTimer); if(camStream){ cam.pause?.(); cam.srcObject=null; camStream.getTracks().forEach(t=>t.stop()); camStream=null } }
function grantAdmin(){
  adminPanel.style.display='block';
  adminMsg.textContent='YÃ¶netici yetkileri aktif edildi.';
  log('ADMIN: giriÅŸ baÅŸarÄ±lÄ±');
  speakSoft('YÃ¶netici yetkileri etkin.');
}
/* Admin actions (Ã¶rnek) */
function kioskToggle(){log('Kiosk kilidi (demo)');/* TODO: backend ile gerÃ§ek kilit */}
async function probeBackend(){log('Backend probesiâ€¦');try{/*await fetch(`${API_BASE}/health`)*/await sleep(500);backendStat.textContent='ON';log('Backend cevap verdi.')}catch{backendStat.textContent='OFF';}}
let pin = "";
function pressNum(n){
  if(pin.length < 4){ // 4 haneli ÅŸifre
    pin += n;
    pinDisplay.value = pin;
  }
}
function clearPin(){
  pin = pin.slice(0,-1);
  pinDisplay.value = pin;
}
function checkPin(){
  if(pin === "1673"){
    grantAdmin();
    closeAdmin();
  }else{
    adminError.textContent = "YanlÄ±ÅŸ ÅŸifre!";
    pin = "";
    pinDisplay.value = "";
  }
}

</script>
</body>
</html>
